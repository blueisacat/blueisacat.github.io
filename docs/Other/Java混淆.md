---
layout: default
title: Java混淆
parent: Other
---

### 为什么需要混淆？

在Java世界中，有很多反编译工具（例如jd-gui等），使得Java程序很容易被逆向，从而无法保护代码所有者的知识产权，甚至出现很多高仿程序以假乱真，对使用者产生不利的影响。

那么有没有办法解决这个问题？对于Java语言本身，貌似无法杜绝这种现象，但是可以利用混淆，增大被反编译或者逆向的成本，让不法者望而却步。

只能说防君子不防小人，逆向只是时间成本的问题，这也是个不是办法的办法。

### 怎么混淆？

#### 字节码加密

对于不想被人看懂读懂这种需求，最容易被想到的方法就是加密了，适用于当前场景，那就是对字节码进行加密。不幸的是，这种方法存在根本缺陷，因为JVM无法加载和执行加密的类。也就是说，想要代码执行，那么必须还是要解密的。所以，这种方式变得多此一举了。

#### 名称混淆

名称混淆的思路就是用无意义的字符序列替换类、方法、变量的签名。这种混淆方式还有一个好处就是可以让类文件大小显著的变小，变相的对代码进行了压缩。

但是这种方式也有很大的局限性，比如说：

- 不可能去混淆JRE中的类的名称等

- 由于改变了类签名，对于强依赖反射的代码就不太友好了

#### 字符串加密

字符串加密类似于名称混淆，思路都是将代码变得无意义。字符串加密一般都是将字符串变成复杂的方法调用，使得反编译后不易解读。

但是这种方式也有很大的局限性，比如说：

- 虽然看不懂，但是可以写个程序直接调用获取其返回结果。

- 由于常量变为方法调用，在性能上还是有一定牺牲的。

#### 代码和数据流混淆

流混淆其实是对程序进行修改，使其在运行时产生相同的结果，但不能被反编译成结构良好的Java源代码。大多数代码混淆器会将Java编译器生成的指令替换为 

但是这种方式也有很大的局限性，比如说：

- 对性能会产生负面影响

- 标准Java API类不会被混淆，依然可以被反编译

虽然这种方式利用一些反编译工具无法反编译，但是还是可以读取字节码进行还原，到头来还是一个时间成本问题。

### 混淆选型

| 产品 | 授权 | 价格 | 
| -- | -- | -- |
| Allatori | Y | ￥ | 
| Proguard | N | - | 
| yGuard | N | - | 


对于免费的 