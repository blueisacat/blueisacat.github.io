---
layout: default
title: HTTP、TCP、UDP、Socket、WebSocket
parent: Other
---

### 一、这一大堆关键字之间到底有啥区别?

有名字就有定义，理解的前提从来都是对定义有所了解。就好比现在让你形容一下梯形的定义，如果你不知道定义，你就可能把平行四边形当作特殊的梯形处理，也就有可能把TCP和Socket搞混，更加会纠结TCP连接与Socket连接以及HTTP的长/短连接之间到底有啥区别。

其实有了区别才好理解。但在这之前首先得理清一个概念，那就是OSI七层模型，以及所谓的五层模型，四层模型到底是什么?

OSI七层模型是哇能的国际标准化组织(ISO)提出的一个试图使各种计算机在世界范围内互联的理想标准，说白了理想和现实的差距就是七层模型和五层模型的差距。具体分类如下表：

![](../../assets/images/Other/attachments/HTTP、TCP、UDP、Socket、WebSocket_image_0.png)

七层模型的上三层归为应用层即为TCP/IP五层模型，五层模型的下两层归为链接层或者说实体层即为四层模型。


也就是说，所谓的五层或者四层，其实可以认为是方便理解而形成的潜规则，而具体的实施肯定还是得根据七层得标准来。毕竟每一层都有每一层各自得功能，而为了完成每一层得功能，就需要大家遵守相关的规则，也就是协议。所以，对模型分层没必要太在意，五层也好，四层也罢，对于这些看不见摸不着的东西，你只要知道，互联网是分层的，来来去去加起来也就这么几层就够了。
那么，回到第一个问题，这一大堆关键词之间到底有啥区别?


- 从本质上来区分，HTTP、WebSocket，TCP，UDP，IP都是协议，而TCP/IP是不同协议的组合，你也可以称之为协议栈，协议簇，TCP/IP模型等等都可以，你开心就好，反正都是为了完成对应功能而制定的统一规则。而Socket(套接字)才是真正能操作的东西。Socket的本质是API，是先人对TCP/IP协议族的抽象或者说封装，它就像一个门面，给你一个操作TCP/IP协议的入口，来建立Socket连接。值得一提的是，此Socket是指网络编程下的Socket，而不是Unix中的Socket。虽然概念相似，但是Unix重得Socket不是基于这些协议，儿试基于操作系统本身的文件系统。

- 从分层上来区分，HTTP、WebSocket是应用层协议，TCP、UDP是传输层协议，IP是网络层协议。

### 二、这些关键词之间具体有什么联系?

#### 1. TCP和UDP

TCP是面向连接的一种传输控制协议。TCP连接之后，客户端和服务端可以互相发送和接收消息，在客户端或者服务器没有主动断开之前，连接一直存在，故称为长连接。特点：连接有耗时，传输数据无大小限制，精准可靠，先发先至。


UDP是无连接的用户数据报协议，所谓的无连接是在传输数据之前不需要交换信息，没有握手建立连接的过程，只需要直接将对应的数据发送到指定的地址和端口就行。故UDP的特点是不稳定，速度快，可广播，一般数据包限定64KB之内，先发未必先至。


#### 2. HTTP

HTTP是基于TCP协议的应用，请求时需建立TCP连接，而且请求包中需要包含请求方法，URI，协议版本等信息，请求结束后断开连接，完成一次请求/响应操作。故称为短连接。


而HTTP/1.1中的keep-alive所保持的长连接则是为了优化每次HTTP请求中TCP连接三次握手的麻烦和资源开销，只建立一次TCP连接，多次的在这个通道上完成请求/响应操作。值得一提的是，服务器无法主动给客户端推送消息。


#### 3. WebSocket

WebSocket也是一种协议，并且也是基于TCP协议的。具体流程是WebSocket通过HTTP先发送一个标记了Upgrade的请求，服务端解析后开始建立TCP连接，省去了HTTP长连接每次请求都要上传header的冗余，可以理解为WebSocket是HTTP的优化，但WebSocket不仅仅在Web应用程序上得到支持。


#### 4. Socket连接和TCP连接

其实就是一个文字游戏而已，建立Socket连接需要至少一对Socket(套接字)，而创建Socket连接可以指定不同的传输层协议，即TCP或UDP，所以当采用TCP建立连接时，该Socket连接就视为一个TCP连接。而采用UDP则是无连接的。


#### 5. Socket和WebSocket

这两个虽然名字差不多，但却是两个万年泉不同的概念，就好比Java和JavaScritpt一样毫无关系。Socket是一套协议封装后的接口，用于建立Socket连接，而WebSocket虽然是H5的产物，但也不仅仅局限于浏览器的应用程序，许多语言都提供了WebSocket的支持，比如C，C++，Python等。


#### 6. HTTP、WebSocket与TCP的关系

HTTP通信过程属于"你推一下，我走一下"的方式，客户端不发请求则服务器永远无法发送数据给客户端，而WebSocket则在进行第一次HTTP请求之后，其他全部采用TCP通道进行双向通讯。所以，HTTP和WebSocket虽然都是基于TCP协议，但是两者属于完全不同的两种通讯方式。


能比较的都比较了，附上一张关系图强化理解。


![](../../assets/images/Other/attachments/HTTP、TCP、UDP、Socket、WebSocket_image_1.png)


